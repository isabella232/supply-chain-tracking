/* eslint-env node */
const path = require('path');
const webpackMerge = require('webpack-merge');
const webpack = require('webpack');
const {
    baseLibraryConfig,
    entries,
    WatchRunPlugin,
} = require('@splunk/dashboard-build-tools/webpack');

module.exports = [
    webpackMerge(baseLibraryConfig, {
        entry: entries(path.join(__dirname, 'src')),
        output: {
            path: __dirname,
        },
        plugins: [
            new webpack.WatchIgnorePlugin([
                /packages\/dashboard-definition\/[a-zA-Z_\-0-9]+\.js(\.map)?$/,
                /\.d\.ts(\.map)?$/,
            ]),
            new WatchRunPlugin(),
        ],
    }),
];
