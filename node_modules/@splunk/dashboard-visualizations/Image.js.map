{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"@splunk/ui-utils/i18n\"","webpack:///external \"styled-components\"","webpack:///external \"@babel/runtime/helpers/taggedTemplateLiteral\"","webpack:///external \"@babel/runtime/helpers/inherits\"","webpack:///external \"@babel/runtime/helpers/possibleConstructorReturn\"","webpack:///./src/visualizations/Image/ImageApi.js","webpack:///./src/visualizations/Image/optionsSchema.js","webpack:///./src/visualizations/Image/editorConfig.js","webpack:///./src/visualizations/Image/Image.jsx","webpack:///external \"@splunk/visualizations-shared/style\"","webpack:///external \"@splunk/dashboard-visualizations/common/IconPlaceholder\"","webpack:///external \"@splunk/dashboard-visualizations/utils/enhancer\"","webpack:///external \"react\"","webpack:///external \"@splunk/visualization-icons\"","webpack:///external \"lodash/get\"","webpack:///external \"@splunk/dashboard-visualizations/utils/eventUtils\"","webpack:///external \"lodash\"","webpack:///external \"@babel/runtime/helpers/defineProperty\"","webpack:///external \"@babel/runtime/helpers/assertThisInitialized\"","webpack:///external \"@babel/runtime/helpers/getPrototypeOf\"","webpack:///external \"@splunk/dashboard-visualizations/common/BaseVisualizationApi\"","webpack:///external \"@babel/runtime/helpers/classCallCheck\"","webpack:///external \"@splunk/visualizations-shared/RemoteImage\"","webpack:///external \"@babel/runtime/helpers/createClass\"","webpack:///external \"@splunk/dashboard-visualizations/common/BaseVisualization\""],"names":["ImageApi","srcFromOptions","get","isRemote","isRemoteImage","options","src","BaseApi","description","type","preserveAspectRatio","default","editorConfig","label","_","open","layout","option","editor","showEditor","Container","props","toDimension","pick","shouldShowPlaceholder","toImageDimensions","Image","styled","ImageComponent","height","width","title","mode","onEventTrigger","hasEventHandlers","onClick","enableClickHandler","getClickHandler","e","BaseVisualization","propTypes","defaultProps","requiredDataSources","initialDimension","optionsSchema","placeholder"],"mappings":"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","file":"Image.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 140);\n","module.exports = require(\"@splunk/ui-utils/i18n\");","module.exports = require(\"styled-components\");","module.exports = require(\"@babel/runtime/helpers/taggedTemplateLiteral\");","module.exports = require(\"@babel/runtime/helpers/inherits\");","module.exports = require(\"@babel/runtime/helpers/possibleConstructorReturn\");","import get from 'lodash/get';\nimport BaseApi from '@splunk/dashboard-visualizations/common/BaseVisualizationApi';\nimport { isRemoteImage } from '@splunk/visualizations-shared/RemoteImage';\n/**\n * Image Api\n */\nclass ImageApi extends BaseApi {\n    constructor(viz) {\n        super();\n        this.viz = viz;\n    }\n\n    /**\n     * return snapshot of that includes inlined image\n     */\n    snapshot() {\n        const srcFromOptions = get(this.viz.props, ['options', 'src'], '');\n        const isRemote = isRemoteImage(srcFromOptions);\n        return {\n            options: {\n                ...this.viz.props.options,\n                src:\n                    isRemote && this.viz.remoteImage\n                        ? get(this.viz.remoteImage, ['state', 'imageDataURI'], '')\n                        : srcFromOptions,\n            },\n        };\n    }\n}\n\nexport default ImageApi;\n","export default {\n    src: {\n        description: 'URL of an image file. All browser-supported image formats are acceptable.',\n        type: 'string',\n    },\n    preserveAspectRatio: {\n        default: false,\n        description: 'Set to true to maintain the aspect ratio of an image when the screen is resized',\n        type: 'boolean',\n    },\n};\n","import { _ } from '@splunk/ui-utils/i18n';\n\nconst editorConfig = [\n    {\n        label: _('Image'),\n        open: true,\n        layout: [\n            [\n                {\n                    label: _(''),\n                    option: 'src',\n                    editor: 'editor.image',\n                },\n            ],\n            [\n                {\n                    label: _('Preserve Aspect Ratio'),\n                    option: 'preserveAspectRatio',\n                    editor: 'editor.checkbox',\n                    showEditor: ({ options }) => !!options.src,\n                },\n            ],\n        ],\n    },\n];\n\nexport default editorConfig;\n","import React, { Component } from 'react';\nimport { pick } from 'lodash';\nimport { _ } from '@splunk/ui-utils/i18n';\nimport IconPlaceholder from '@splunk/dashboard-visualizations/common/IconPlaceholder';\nimport BaseVisualization from '@splunk/dashboard-visualizations/common/BaseVisualization';\nimport { withPlaceholder } from '@splunk/dashboard-visualizations/utils/enhancer';\nimport styled from 'styled-components';\nimport { toDimension } from '@splunk/visualizations-shared/style';\nimport { getClickHandler, enableClickHandler } from '@splunk/dashboard-visualizations/utils/eventUtils';\nimport RemoteImage, { isRemoteImage } from '@splunk/visualizations-shared/RemoteImage';\nimport { Image as ImageIcon } from '@splunk/visualization-icons';\nimport ImageApi from './ImageApi';\nimport optionsSchema from './optionsSchema';\nimport editorConfig from './editorConfig';\n\nconst Container = styled.div.attrs(() => ({\n    'data-test': 'image-container',\n}))`\n    position: relative;\n    box-sizing: border-box;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: ${props => (props.onClick ? 'pointer' : 'inherit')};\n    ${props => toDimension(pick(props, ['width', 'height']))};\n`;\n\nexport const shouldShowPlaceholder = props => {\n    if (props.options.src) {\n        return false;\n    }\n    return true;\n};\n\nexport const toImageDimensions = props => {\n    if (props.shouldPreserveAspectRatio) {\n        return `\n            max-width: 100%;\n            max-height: 100%;\n            width: auto;\n            height: auto;\n        `;\n    }\n    return toDimension(pick(props, ['width', 'height']));\n};\n\nconst Image = styled.img`\n    display: block;\n    ${props => toImageDimensions(props)};\n`;\n\nexport class ImageComponent extends Component {\n    static propTypes = {\n        ...BaseVisualization.propTypes,\n    };\n\n    static defaultProps = {\n        ...BaseVisualization.defaultProps,\n    };\n\n    static dataContract = {\n        requiredDataSources: [],\n    };\n\n    static vizContract = {\n        initialDimension: {\n            width: 150,\n            height: 150,\n        },\n    };\n\n    static editor = editorConfig;\n\n    static schema = optionsSchema;\n\n    constructor(props, context) {\n        super(props, context);\n        this.api = new ImageApi(this);\n    }\n\n    componentDidMount() {\n        // send back the viz api\n        this.props.visualizationApiRef(this.api);\n    }\n\n    componentWillUnmount() {\n        this.props.visualizationApiRef(null);\n    }\n\n    render() {\n        const { options, height, width, title = '', mode, onEventTrigger, hasEventHandlers } = this.props;\n        const { src, preserveAspectRatio } = options;\n        const isRemote = isRemoteImage(src);\n        const onClick = enableClickHandler(hasEventHandlers, mode)\n            ? getClickHandler(onEventTrigger, {}, 'image.click')\n            : () => {};\n        return (\n            <Container width={width} height={height} onClick={onClick}>\n                {isRemote ? (\n                    <RemoteImage\n                        imageURL={src}\n                        title={title}\n                        preserveAspectRatio={preserveAspectRatio}\n                        width={width}\n                        height={height}\n                        ref={ref => {\n                            this.remoteImage = ref;\n                        }}\n                    />\n                ) : (\n                    <Image\n                        data-test=\"image\"\n                        src={src}\n                        shouldPreserveAspectRatio={preserveAspectRatio}\n                        width={width}\n                        height={height}\n                        alt={_(title)}\n                        onError={e => {\n                            e.target.alt = _('Image not found');\n                        }}\n                        referrerPolicy=\"no-referrer\"\n                    />\n                )}\n            </Container>\n        );\n    }\n}\n\nexport default withPlaceholder({\n    placeholder: <IconPlaceholder icon={<ImageIcon />} />,\n    shouldShowPlaceholder,\n})(ImageComponent);\n","module.exports = require(\"@splunk/visualizations-shared/style\");","module.exports = require(\"@splunk/dashboard-visualizations/common/IconPlaceholder\");","module.exports = require(\"@splunk/dashboard-visualizations/utils/enhancer\");","module.exports = require(\"react\");","module.exports = require(\"@splunk/visualization-icons\");","module.exports = require(\"lodash/get\");","module.exports = require(\"@splunk/dashboard-visualizations/utils/eventUtils\");","module.exports = require(\"lodash\");","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/assertThisInitialized\");","module.exports = require(\"@babel/runtime/helpers/getPrototypeOf\");","module.exports = require(\"@splunk/dashboard-visualizations/common/BaseVisualizationApi\");","module.exports = require(\"@babel/runtime/helpers/classCallCheck\");","module.exports = require(\"@splunk/visualizations-shared/RemoteImage\");","module.exports = require(\"@babel/runtime/helpers/createClass\");","module.exports = require(\"@splunk/dashboard-visualizations/common/BaseVisualization\");"],"sourceRoot":""}